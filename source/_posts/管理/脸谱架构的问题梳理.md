---
title: 脸谱架构的问题梳理
date: 2017-02-16 14:45:16
tags: 
 - 梳理
---


> 作者：王章 花名：风男 2016/12/23 16:26:58

## 编码层级梳理

> 代码分层而治是对代码进行抽象、管理和维护的最好方法。采用不同的架构设计则有不同分层设计，甚至不同公司也有不同的设计。有的传统企业代码层级只有2层，有的则有多达7层。我们公司由于长时间没有一套完整的方案，且长时间缺乏对这块内容的梳理，因此在代码架构上已经有混淆的嫌疑，且新人小伙伴也缺乏统一的架构认知。因此辑需一套适合我们公司，且能适应后期发展的代码层级架构来统一开发人员的代码编写。下面就分层关系进行总结，换句话说是梳理前人的意图吧

下面就SOA的代码架构进行详细的阐述

由下至上的分层关系

* 第一层：数据层：查询数据操作CRUD（DAO）
* 第二层：服务层：数据基本组合
* 第三层：业务层：数据复杂逻辑组合
* 第四层：第三层的服务包装层 如过滤参数
* 第五层：控制层：调度业务系统

业务介绍：

红包业务，红包业务由社群红包和聊天红包组成属于不同的两个业务域。

* 第一层：数据层
* 第二层：服务层
* 第三层：业务层
* 第四层：第三层的服务包装层 如过滤参数
* 第五层：控制层：调度业务系统

举例（图示）：
![](http://i.imgur.com/BkRo6iw.png)

![](http://i.imgur.com/PJMiMjP.png)

## 关于命名规范
服务的命名也是需要统一

第一层：数据层：以Dao结尾
第二层：服务层：以Service结尾
第三层：业务层：以Business结尾
第四层：第三层的Rpc服务包装层:以Facade结尾
第五层：控制层：以Ctl结尾
## 关于接口规范
服务的接口也是需要统一 这里特指facade层

接口应具有单调性
接口应具有最少暴露
## 关于common-service
个人认为当服务会被多个业务域使用时，就应该尝试将其下沉为基础服务。如当前的account服务。在设计初期就应该预先设想到该服务的通用性，而决定是否是为common-service

