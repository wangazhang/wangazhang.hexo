---
title: svn内控计划
date: 2017-05-31 15:55:50
tags:
    - 技术管理
---


# svn内控计划
内控计划是出于安全问题的考虑以及流程化管理需要，svn管理组决定对现有svn管理做进一步的管控。

开始前，先对当前svn管理状况做一个梳理

## 当前状况梳理
### 名词解释
![](http://qianzhang.9rmb.club/14961959803421.jpg)

目前tags，及trunk没有使用（应该是出于简化流程和更快的迭代考虑）

### 目录结构
![](http://qianzhang.9rmb.club/14961960583958.jpg)

### 项目命名规则
`face-域.项目（服务）-service`
如face-sc.community-service 为社群项目

### 分支命名规则
face-域.项目（服务）-service-日期-本分支摘要-分支项目拉取人名称

如face-sc.community-service-0526-community12-lvxc

各个参数以 ‘-’ 分割

### 参数解释：
![](http://qianzhang.9rmb.club/14961973617223.jpg)

### 当前申请规范
（插入申请邮件表格）

### 当前开发流程
（插入流程图）

## 重建管理规则
对于本次规则重建我们希望做到以下几点

1. 不暴露未涉及的开发项目
2. svn的变动不应有大的学习成本


出于安全原因，我们将采用最小开放原则，即不暴露未涉及的开发项目，小伙伴将只能看见和提交自己当前开发的工程（项目）。
svn管理规则的变动不应有大的学习成本。

本次重建可以用以下几个数字来概括

`2-2-n，也即2种角色、2种权限、n个分组`

### 2种角色
角色不应随着事业部增多而发生变化

我们将角色分为 开发类角色和管理类角色

按功能取名为
- 开发组角色
- 工程owner角色
由于svn只有组管理，而没有角色管理的功能，因此对应划分到组管理。比如我们会有X事业部，那么就有‘X事业部开发组’这个组别，同时 X事业部会有一个或者多个其所要开展的项目所产生的工程，那么每个不同的工程将有一个 owner。owner由项目建立只初由团队leader确定，并维护在conflence上：
http://192.168.1.39:8090/pages/viewpage.action?pageId=23463301
比如face-pj.fishpond-feed-service的owner为linenliang，face-pj.fishpond-feed-service项目的owner为yuxin。

owner是工程的所有者，其他团队要进行该工程的开发工作必须通过owner的授权，owner也有义务知晓工程内的所有改变。

### 两种权限:
两个角色分别对应两种权限，开发组角色对应项目开发权限、项目owner角色对应项目管理权限。

1. 项目开发权限:读写项目分支权限，包括读取分支,合并分支到stable，提交修改到分支
    （对应为某一项目分支的读写权限及stable的读写权限）

2. 项目管理权限:在项目开发权限的基础上，增加了对整个项目管理的权限，具体表现在可以拉取分支
    （对应为某一项目的读写权限）
    
### n个分组
根据实际事业部的数目，确定开发组的数目


为了使工程具备自我管理的能力，一个工程仅有一个owner，而owner由该工程的最初创建团队自己确定，没有最初创建小组的（如历史已创建项目）则由svn管理小组指定

因此会有以下等式

- 工程数≥owner数

- 事业部个数=项目开发组数

（插入组管理表格）
http://192.168.1.39:8090/pages/viewpage.action?pageId=25789650
（插入工程列表地址，工程的增加需要同步该表，责任到人）
http://192.168.1.39:8090/pages/viewpage.action?pageId=23463301

新的流程
我们坚持svn的变动不应有大的学习成本的要求，新的流程并没有改变小伙伴的习惯

操作1：新工程的建立
发送如下邮件进行申请
发件人：新工程的负责人，一般是项目负责人
收件人：svnmg
抄送：郑俊平
标题：【新工程申请】关于新建face-sc.community-service工程的申请
内容模板：

![](http://qianzhang.9rmb.club/14962143042432.jpg)

svn小组动作：
在sc下新建一个以face-sc.community-service命名的工程结构文件夹，也即包含branches、tags、trunk子文件夹的文件夹，并按要求给予权限

操作2：老工程新拉分支
发送如下邮件进行申请
svn小组动作
说明

操作3：老分支开发
发送如下邮件进行申请
svn小组动作
说明

